create table documentation (created_at timestamp(6) not null, id bigint generated by default as identity, updated_at timestamp(6), project_id uuid not null, content TEXT, title varchar(255) not null, primary key (id));
create table documentation_issues (created_at timestamp(6) not null, documentation_id bigint not null, id bigint generated by default as identity, issue_id bigint not null, primary key (id), unique (documentation_id, issue_id));
create table issues (priority smallint not null check (priority between 0 and 2), status smallint not null check (status between 0 and 2), story_points integer not null, assignee_id bigint, created_at timestamp(6) not null, creator_id bigint not null, id bigint generated by default as identity, release_id bigint, sprint_id bigint, project_id uuid not null, description text, title varchar(255) not null, primary key (id));
create table project (created_at timestamp(6) not null, creator_id bigint not null, id uuid not null, description varchar(255), name varchar(255) not null, primary key (id));
create table project_user (user_id bigint not null, project_id uuid not null, primary key (user_id, project_id));
create table release (major integer, minor integer, patch integer, created_at timestamp(6) not null, creator_id bigint not null, id bigint generated by default as identity, project_id uuid not null, release_notes text, primary key (id));
create table release_issues (issues_id bigint not null unique, release_id bigint not null, primary key (issues_id, release_id));
create table sprints (created_at timestamp(6) not null, end_date timestamp(6) not null, id bigint generated by default as identity, start_date timestamp(6) not null, project_id uuid not null, name varchar(255) not null, primary key (id));
create table tasks (status smallint not null check (status between 0 and 2), assignee_id bigint, created_at timestamp(6) not null, creator_id bigint not null, id bigint generated by default as identity, issue_id bigint not null, project_id uuid not null, definition_of_done text, description text, title varchar(255) not null, primary key (id));
create table tests (created_at timestamp(6) not null, creator_id bigint not null, id bigint generated by default as identity, issue_id bigint not null, program_code text not null, test_code text not null, primary key (id));
create table users (enabled boolean default true, id bigint generated by default as identity, email varchar(255) not null unique, name varchar(255) not null, password varchar(255) not null, primary key (id));
alter table if exists documentation add constraint FKj2hq78kym1loxoob91oiww804 foreign key (project_id) references project;
alter table if exists documentation_issues add constraint FKombnmncf3adgio0h1crdpereu foreign key (documentation_id) references documentation;
alter table if exists documentation_issues add constraint FKoadbnin2tfte990u0dapb05vs foreign key (issue_id) references issues;
alter table if exists issues add constraint fk_assignee foreign key (assignee_id) references users;
alter table if exists issues add constraint fk_project_creator foreign key (creator_id) references users;
alter table if exists issues add constraint FKg9pe16ifmx53tq3w9s49pajco foreign key (project_id) references project;
alter table if exists issues add constraint fk_issue_release foreign key (release_id) references release;
alter table if exists issues add constraint fk_issue_sprint foreign key (sprint_id) references sprints;
alter table if exists project add constraint fk_project_creator foreign key (creator_id) references users;
alter table if exists project_user add constraint FKfscw5rga2yu389e705x9wg6kb foreign key (user_id) references users;
alter table if exists project_user add constraint FK4ug72llnm0n7yafwntgdswl3y foreign key (project_id) references project;
alter table if exists release add constraint fk_project_creator foreign key (creator_id) references users;
alter table if exists release add constraint FKhmai3uwogjte55w6h0t6b6inh foreign key (project_id) references project;
alter table if exists release_issues add constraint FKb3s2ym2ev6olh717kpt6hr20 foreign key (issues_id) references issues;
alter table if exists release_issues add constraint FKnxmts5836dkddrun3su682516 foreign key (release_id) references release;
alter table if exists sprints add constraint fk_sprint_project foreign key (project_id) references project;
alter table if exists tasks add constraint fk_assignee foreign key (assignee_id) references users;
alter table if exists tasks add constraint fk_project_creator foreign key (creator_id) references users;
alter table if exists tasks add constraint FKinwx22oxglynw3rafukne2ntq foreign key (issue_id) references issues;
alter table if exists tasks add constraint FKekeburt7kaq2chv97jybdxnfm foreign key (project_id) references project;
alter table if exists tests add constraint fk_project_creator foreign key (creator_id) references users;
alter table if exists tests add constraint FKe1set0oqgdoj6r7jwi48o6q0v foreign key (issue_id) references issues;
