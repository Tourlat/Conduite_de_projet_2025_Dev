#!/bin/bash
# commit-msg hook: verify that commit message starts with a verb (imperative mood)

commit_msg_file=$1
first_line=$(head -n1 "$commit_msg_file")

# Simple regex: capitalized word (verb) followed by a space, e.g., "Add ", "Fix ", "Update "
if [[ ! $first_line =~ ^([A-Z][a-z]+)\  ]]; then
  echo "❌ Commit message must start with a verb in imperative mood (e.g., 'Add', 'Fix', 'Update')."
  echo "Your message: '$first_line'"
  exit 1
fi

# Optional: allow only known verbs
allowed_verbs="Add|Fix|Update|Change|Remove|Improve|Refactor|Create|Implement|Document|Revert"
if [[ ! $first_line =~ ^($allowed_verbs)\  ]]; then
  echo "⚠️ Warning: Commit message should start with a common verb (e.g., Add, Fix, Update)."
  echo "Your message: '$first_line'"
fi

exit 0